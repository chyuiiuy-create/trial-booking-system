<!DOCTYPE html>
<html lang="zh-HK">
<!-- 
============================================
è©¦å ‚é ç´„ç³»çµ± - é ç´„è¡¨å–®é é¢
============================================
èªªæ˜ï¼šé€™æ˜¯é ç´„è¡¨å–®çš„ä¸»é é¢
å®¶é•·å¯ä»¥åœ¨é€™è£¡å¡«å¯«å­¸ç”Ÿè³‡æ–™å’Œé¸æ“‡é ç´„æ™‚é–“
============================================
-->
<head>
    <!-- ç¶²é ç·¨ç¢¼è¨­å®š -->
    <meta charset="UTF-8">
    <!-- éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œé©æ‡‰æ‰‹æ©Ÿå’Œé›»è…¦è¢å¹• -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ç¶²é æ¨™é¡Œ -->
    <title>è©¦å ‚é ç´„ - {{ center_name }}</title>
    <!-- å¼•å…¥è‡ªå®šç¾©CSSæ¨£å¼ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- å¼•å…¥Googleå­—é«”ï¼ˆæ€æºé»‘é«”ï¼‰ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ========================================
         é é¢ä¸»å®¹å™¨
    ======================================== -->
    <div class="container">
        
        <!-- ========================================
             é é¢æ¨™é¡Œå€åŸŸ
        ======================================== -->
        <header class="header">
            <!-- è£œç¿’ç¤¾æ¨™èªŒ/åœ–æ¨™ -->
            <div class="logo">
                <span class="logo-icon">ğŸ“š</span>
            </div>
            <!-- è£œç¿’ç¤¾åç¨± -->
            <h1 class="title">{{ center_name }}</h1>
            <!-- é é¢å‰¯æ¨™é¡Œ -->
            <p class="subtitle">å…è²»è©¦å ‚é ç´„</p>
        </header>

        <!-- ========================================
             éŒ¯èª¤/æç¤ºè¨Šæ¯é¡¯ç¤ºå€åŸŸ
        ======================================== -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <!-- æ ¹æ“šè¨Šæ¯é¡å‹é¡¯ç¤ºä¸åŒæ¨£å¼ -->
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- ========================================
             é ç´„è¡¨å–®
        ======================================== -->
        <form class="booking-form" action="{{ url_for('submit_booking') }}" method="POST">
            
            <!-- ====================================
                 å­¸ç”Ÿè³‡æ–™å€åŸŸ
            ==================================== -->
            <div class="form-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ‘¤</span>
                    å­¸ç”Ÿè³‡æ–™
                </h2>
                
                <!-- å­¸ç”Ÿå§“åè¼¸å…¥æ¡† -->
                <div class="form-group">
                    <label for="student_name" class="form-label">
                        å­¸ç”Ÿå§“å <span class="required">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="student_name" 
                        name="student_name" 
                        class="form-input" 
                        placeholder="è«‹è¼¸å…¥å­¸ç”Ÿå…¨å"
                        required
                    >
                </div>
                
                <!-- å¹´ç´šé¸æ“‡ä¸‹æ‹‰æ¡† -->
                <div class="form-group">
                    <label for="grade" class="form-label">
                        å¹´ç´š <span class="required">*</span>
                    </label>
                    <select id="grade" name="grade" class="form-select" required>
                        <option value="" disabled selected>è«‹é¸æ“‡å¹´ç´š</option>
                        <!-- å¾ªç’°é¡¯ç¤ºæ‰€æœ‰å¹´ç´šé¸é … -->
                        {% for grade in grades %}
                            <option value="{{ grade }}">{{ grade }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- ====================================
                 è¯çµ¡è³‡æ–™å€åŸŸ
            ==================================== -->
            <div class="form-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ“</span>
                    è¯çµ¡è³‡æ–™
                </h2>
                
                <!-- è¯çµ¡é›»è©±è¼¸å…¥æ¡† -->
                <div class="form-group">
                    <label for="phone" class="form-label">
                        è¯çµ¡é›»è©± <span class="required">*</span>
                    </label>
                    <input 
                        type="tel" 
                        id="phone" 
                        name="phone" 
                        class="form-input" 
                        placeholder="ä¾‹å¦‚ï¼š9123 4567"
                        pattern="[0-9\s\-]+"
                        required
                    >
                    <span class="form-hint">è«‹è¼¸å…¥é¦™æ¸¯æ‰‹æé›»è©±è™Ÿç¢¼</span>
                </div>
                
                <!-- é›»éƒµåœ°å€è¼¸å…¥æ¡†ï¼ˆéå¿…å¡«ï¼‰ -->
                <div class="form-group">
                    <label for="email" class="form-label">
                        é›»éƒµåœ°å€ <span class="optional">(é¸å¡«)</span>
                    </label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        class="form-input" 
                        placeholder="example@email.com"
                    >
                    <span class="form-hint">å¡«å¯«å¾Œå¯æ”¶åˆ°é ç´„ç¢ºèªéƒµä»¶</span>
                </div>
            </div>

            <!-- ====================================
                 é ç´„æ™‚é–“å€åŸŸ
            ==================================== -->
            <div class="form-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ“…</span>
                    é ç´„æ™‚é–“
                </h2>
                
                <!-- é ç´„æ—¥æœŸé¸æ“‡ -->
                <div class="form-group">
                    <label for="booking_date" class="form-label">
                        é ç´„æ—¥æœŸ <span class="required">*</span>
                    </label>
                    <select id="booking_date" name="booking_date" class="form-select" required>
                        <option value="" disabled selected>è«‹é¸æ“‡æ—¥æœŸ</option>
                        <!-- å¾ªç’°é¡¯ç¤ºå¯é ç´„çš„æ—¥æœŸ -->
                        {% for date in available_dates %}
                            <option value="{{ date.date }}">{{ date.full_display }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <!-- é ç´„æ™‚æ®µé¸æ“‡ -->
                <div class="form-group">
                    <label for="time_slot" class="form-label">
                        é ç´„æ™‚æ®µ <span class="required">*</span>
                    </label>
                    <select id="time_slot" name="time_slot" class="form-select" required>
                        <option value="" disabled selected>è«‹é¸æ“‡æ™‚æ®µ</option>
                        <!-- å¾ªç’°é¡¯ç¤ºæ‰€æœ‰æ™‚æ®µé¸é … -->
                        {% for slot in time_slots %}
                            <option value="{{ slot }}">{{ slot }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- ====================================
                 æäº¤æŒ‰éˆ•
            ==================================== -->
            <div class="form-actions">
                <button type="submit" class="submit-btn">
                    <span class="btn-icon">âœ“</span>
                    ç¢ºèªé ç´„
                </button>
            </div>

        </form>

        <!-- ========================================
             è£œç¿’ç¤¾è³‡è¨Šå€åŸŸ
        ======================================== -->
        <div class="contact-info">
            <h3 class="info-title">è¯çµ¡æˆ‘å€‘</h3>
            <div class="info-items">
                <!-- åœ°å€ -->
                <div class="info-item">
                    <span class="info-icon">ğŸ“</span>
                    <span class="info-text">{{ center_address }}</span>
                </div>
                <!-- é›»è©± -->
                <div class="info-item">
                    <span class="info-icon">ğŸ“</span>
                    <span class="info-text">{{ center_phone }}</span>
                </div>
                <!-- é›»éƒµ -->
                <div class="info-item">
                    <span class="info-icon">âœ‰ï¸</span>
                    <span class="info-text">{{ center_email }}</span>
                </div>
            </div>
        </div>

        <!-- ========================================
             é é¢åº•éƒ¨
        ======================================== -->
        <footer class="footer">
            <p>&copy; 2024 {{ center_name }} ç‰ˆæ¬Šæ‰€æœ‰</p>
        </footer>

    </div>

    <!-- ========================================
         JavaScript - è¡¨å–®é©—è­‰
    ======================================== -->
    <script>
        // ç•¶æ–‡æª”åŠ è¼‰å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // ç²å–è¡¨å–®å…ƒç´ 
            const form = document.querySelector('.booking-form');
            
            // è¡¨å–®æäº¤å‰é©—è­‰
            form.addEventListener('submit', function(event) {
                // ç²å–æ‰€æœ‰å¿…å¡«æ¬„ä½çš„å€¼
                const studentName = document.getElementById('student_name').value.trim();
                const grade = document.getElementById('grade').value;
                const phone = document.getElementById('phone').value.trim();
                const bookingDate = document.getElementById('booking_date').value;
                const timeSlot = document.getElementById('time_slot').value;
                
                // é©—è­‰å¿…å¡«æ¬„ä½
                if (!studentName || !grade || !phone || !bookingDate || !timeSlot) {
                    event.preventDefault();  // é˜»æ­¢è¡¨å–®æäº¤
                    alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                    return false;
                }
                
                // é©—è­‰é›»è©±è™Ÿç¢¼æ ¼å¼ï¼ˆé¦™æ¸¯æ‰‹æ©Ÿè™Ÿç¢¼é€šå¸¸æ˜¯8ä½æ•¸å­—ï¼‰
                const phoneDigits = phone.replace(/[\s\-]/g, '');
                if (phoneDigits.length < 8) {
                    event.preventDefault();
                    alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é¦™æ¸¯é›»è©±è™Ÿç¢¼');
                    return false;
                }
                
                // é©—è­‰é€šéï¼Œé¡¯ç¤ºè¼‰å…¥æç¤º
                const submitBtn = form.querySelector('.submit-btn');
                submitBtn.innerHTML = '<span class="btn-icon">â³</span> è™•ç†ä¸­...';
                submitBtn.disabled = true;
                
                return true;
            });
            
            // é›»è©±è™Ÿç¢¼è‡ªå‹•æ ¼å¼åŒ–ï¼ˆæ¯4ä½åŠ ä¸€å€‹ç©ºæ ¼ï¼‰
            const phoneInput = document.getElementById('phone');
            phoneInput.addEventListener('input', function(e) {
                // ç§»é™¤éæ•¸å­—å­—ç¬¦
                let value = e.target.value.replace(/\D/g, '');
                // é™åˆ¶æœ€å¤š8ä½æ•¸å­—
                value = value.substring(0, 8);
                // æ ¼å¼åŒ–ç‚º XXXX XXXX
                if (value.length > 4) {
                    value = value.substring(0, 4) + ' ' + value.substring(4);
                }
                e.target.value = value;
            });
        });
    </script>

</body>
</html>

